---
import PostLayout from '../../layouts/PostLayout.astro';
import {getAllPosts, getBacklinks} from '../../lib/content.js';

export async function getStaticPaths() {
  const [allPosts, backlinks] = await Promise.all([getAllPosts(), getBacklinks()]);
  const posts = allPosts.filter(p => p.url.startsWith('/songwriting/'));

  return posts.map(post => ({
    params: {
      slug: post.slug
    },
    props: {
      post,
      backlinks: backlinks[post.url] || []
    }
  }));
}

const {post, backlinks} = Astro.props;
---

<PostLayout post={post} backlinks={backlinks} sectionKey="songwriting" />
