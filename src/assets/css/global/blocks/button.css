/* based on Andy Bell's article: https://piccalil.li/blog/how-i-build-a-button-component/ */

.button {
  --button-bg: color-mix(in oklab, var(--color-bg-elevated) 88%, transparent);
  --button-color: var(--color-text);
  --button-hover-bg: color-mix(in oklab, var(--button-bg) 84%, var(--color-secondary));
  --button-border-width: 1px;
  --button-border-style: solid;
  --button-border-color: var(--color-border-subtle);
  --button-radius: var(--radius-soft);
  --button-gap: var(--space-2xs);
  --button-padding: var(--space-xs) var(--space-m);
  --button-font-family: var(--font-base);
  --button-font-weight: var(--font-regular);
  --button-font-size: var(--size-step-min-1);
  --button-text-transform: none;
  --button-tracking: normal;

  display: inline-flex;
  align-items: center;
  gap: var(--button-gap);
  padding: var(--button-padding);
  background: var(--button-bg);
  color: var(--button-color);
  border-width: var(--button-border-width);
  border-style: var(--button-border-style);
  border-color: var(--button-border-color);
  border-radius: var(--button-radius);
  text-decoration: none;
  font-family: var(--button-font-family);
  font-weight: var(--button-font-weight);
  font-size: var(--button-font-size);
  line-height: var(--leading-flat);
  text-transform: var(--button-text-transform);
  letter-spacing: var(--button-tracking);
  text-box-trim: trim-both;
  text-box-edge: cap alphabetic;
  transition: background-color var(--transition-duration) var(--transition-timing),
    border-color var(--transition-duration) var(--transition-timing),
    color var(--transition-duration) var(--transition-timing);
}

.button svg {
  block-size: var(--button-icon-size, 1.2cap);
}

/* Hover/focus/active */
.button:hover,
.button[aria-current='page'],
.button[aria-pressed='true'],
.button[data-state='active'] {
  background: var(--button-hover-bg);
  color: var(--button-color);
}

.button:focus-visible {
  outline-color: var(--button-outline-color, var(--color-focus-ring));
}

.button:active {
  transform: scale(99%);
}

/* Variants */
.button[data-button-variant='primary'] {
  --button-bg: color-mix(in oklab, var(--color-primary) 35%, var(--color-bg-elevated));
  --button-color: var(--color-text);
  --button-border-color: color-mix(in oklab, var(--color-primary) 75%, var(--color-bg));
}

.button[data-button-variant='secondary'] {
  --button-bg: color-mix(in oklab, var(--color-secondary) 35%, var(--color-bg-elevated));
  --button-color: var(--color-text);
  --button-border-color: color-mix(in oklab, var(--color-secondary) 75%, var(--color-bg));
}

.button[data-button-variant='tertiary'] {
  --button-bg: color-mix(in oklab, var(--color-tertiary) 30%, var(--color-bg-elevated));
  --button-color: var(--color-text);
  --button-border-color: color-mix(in oklab, var(--color-tertiary) 70%, var(--color-bg));
}

.button[data-ghost-button] {
  --button-bg: transparent;
  --button-border-color: var(--color-border-subtle);
  --button-color: var(--color-text-light);
}

.button[data-ghost-button]:hover {
  --_ghost-hover-bg: color-mix(in oklab, var(--color-bg-elevated) 88%, transparent);
  background: var(--_ghost-hover-bg);
  color: var(--color-text);
}

.button[data-small-button] {
  --button-border-width: 1px;
  --button-radius: var(--radius-pill);
  --button-font-size: var(--size-step-min-2);
  --button-padding: 0.2rem 0.55rem;
  --button-tracking: 0;
}

/* Radius variants */
.button[data-button-radius='hard'] {
  --button-radius: 0;
}

@media (prefers-reduced-motion: reduce) {
  .button {
    transition: none;
  }
}
